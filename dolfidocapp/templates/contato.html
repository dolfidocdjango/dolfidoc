{% extends 'base.html' %}
{% load static %}
{% block title %}Contato - Dolfidoc{% endblock %}
{% block meta_description %}Entre em contato com a Dolfidoc. Envie sua mensagem diretamente via WhatsApp.{% endblock %}

{% block content %}
<div class="contact-wrapper">

  <!-- Coluna Esquerda -->
  <div class="contact-info" id="contact-info">
    <h1>Converse conosco</h1>
    
    <div class="emaildolfidoc">
      <p>E-mail:</p>
      <p><a href="mailto:dolfidoc@dolfidoc.com.br">contato@dolfidoc.com.br</a></p>
    </div>

    <div class="social-section">
      <p>Nos siga em nossas redes sociais:</p>
      <div class="social-icons">
        <a href="#" aria-label="Facebook" target="_blank">
          <i class="material-icons">facebook</i>
        </a>
        <a href="#" aria-label="Instagram" target="_blank">
          <i class="material-icons">photo_camera</i>
        </a>
      </div>
    </div>
  </div>

  <!-- Coluna Direita (Formulário) -->
  <form class="contact-form" id="contactForm">
    <div class="form-group">
      <input type="text" id="nome" name="nome" placeholder="Nome" required>
    </div>

    <div class="form-group">
      <input type="email" id="email" name="email" placeholder="E-mail">
    </div>

    <div class="form-group">
      <input type="tel" id="telefone" name="telefone" placeholder="(99) 99999-9999" required>
    </div>

    <div class="form-group">
      <textarea id="mensagem" name="mensagem" placeholder="Como podemos ajudar?" required></textarea>
    </div>

    <button type="submit" class="btn-whatsapp">
      Enviar <span class="material-icons">whatsapp</span>
    </button>
  </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://fonts.googleapis.com/icon?family=Material+Icons"></script>
<script>
$(document).ready(function() {
  $('#telefone').on('input', function() {
      let value = $(this).val().replace(/\D/g, '');
      if (value.length <= 11) {
          value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
          value = value.replace(/(\d)(\d{4})$/, '$1-$2');
      }
      $(this).val(value);
  });

  $('#contactForm').on('submit', function(e) {
      e.preventDefault();
      const nome = $('#nome').val().trim();
      const telefone = $('#telefone').val().trim();
      const mensagem = $('#mensagem').val().trim();

      if (!nome || !telefone || !mensagem) {
          alert('Por favor, preencha todos os campos obrigatórios.');
          return;
      }

      let textoWhatsApp = `Olá! Meu nome é ${nome}.%0A` +
                          `Telefone: ${telefone}%0A%0A` +
                          `Mensagem: ${mensagem}`;

      const numeroWhatsApp = '5511999999999'; // substitua pelo número real
      const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${textoWhatsApp}`;
      window.open(urlWhatsApp, '_blank');
  });
});
</script>
{% endblock %}
